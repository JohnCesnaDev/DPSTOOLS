var X=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var K=(l,t,u)=>t in l?X(l,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[t]=u,M=(l,t)=>{for(var u in t||(t={}))le.call(t,u)&&K(l,u,t[u]);if(O)for(var u of O(t))te.call(t,u)&&K(l,u,t[u]);return l},S=(l,t)=>Z(l,ee(t));import{p as Q,q as T}from"./QItem.04e68bf8.js";import{g as ae,d as oe,Q as E,b as m,c as j,e as A}from"./QTable.74b83f22.js";import{j as ue,k as re,a as v}from"./QBtn.0ed945c2.js";import{c as I,d as x,a as se}from"./render.ceeefab2.js";import{e as D,h as k,g as ne,R as de,r as i,E as ie,F as o,D as ce,O as d,G as e,I as _,J as pe,x as w}from"./index.381a4a6f.js";import{Q as fe}from"./QPage.b6c838ad.js";var me=I({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(l,{slots:t}){const u=ne(),n=D(()=>"q-td"+(l.autoWidth===!0?" q-table--col-auto-width":"")+(l.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(l.props===void 0)return k("td",{class:n.value},x(t.default));const f=u.vnode.key,h=(l.props.colsMap!==void 0?l.props.colsMap[f]:null)||l.props.col;if(h===void 0)return;const{row:b}=l.props;return k("td",{class:n.value+h.__tdClass(b),style:h.__tdStyle(b)},x(t.default))}}}),ve=I({name:"QTr",props:{props:Object,noHover:Boolean},setup(l,{slots:t}){const u=D(()=>"q-tr"+(l.props===void 0||l.props.header===!0?"":" "+l.props.__trClass)+(l.noHover===!0?" q-tr--no-hover":""));return()=>k("tr",{class:u.value},x(t.default))}}),g=I({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(l,{slots:t}){const u=D(()=>`q-card__section q-card__section--${l.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>k(l.tag,{class:u.value},x(t.default))}}),B=I({name:"QCardActions",props:S(M({},ue),{vertical:Boolean}),setup(l,{slots:t}){const u=re(l),n=D(()=>`q-card__actions ${u.value} q-card__actions--${l.vertical===!0?"vert column":"horiz row"}`);return()=>k("div",{class:n.value},x(t.default))}});function N(l){if(l===!1)return 0;if(l===!0||l===void 0)return 1;const t=parseInt(l,10);return isNaN(t)?0:t}var V=se({name:"close-popup",beforeMount(l,{value:t}){const u={depth:N(t),handler(n){u.depth!==0&&setTimeout(()=>{const f=ae(l);f!==void 0&&oe(f,n,u.depth)})},handlerKey(n){de(n,13)===!0&&u.handler(n)}};l.__qclosepopup=u,l.addEventListener("click",u.handler),l.addEventListener("keyup",u.handlerKey)},updated(l,{value:t,oldValue:u}){t!==u&&(l.__qclosepopup.depth=N(t))},beforeUnmount(l){const t=l.__qclosepopup;l.removeEventListener("click",t.handler),l.removeEventListener("keyup",t.handlerKey),delete l.__qclosepopup}});const _e={class:"row items-start q-gutter-md"},he=_(" Dimension "),ge={style:{margin:"15px"}},be={class:"col column q-gutter-md"},ye=_(" Liste "),qe={style:{margin:"15px"}},we={class:"col"},Ve=_(" Resultat "),xe={style:{margin:"15px"}},ke=_(" Param\xE8tres "),Ce={style:{margin:"15px"}},Qe={class:"col column q-gutter-md"},Te=d("div",{class:"text-h6"},"Alert",-1),Ee=_(" Veuillez entr\xE9e une longueur. "),Ae=d("div",{class:"text-h6"},"Alert",-1),Be=_(" Veuillez entr\xE9e une longueur inferieur a la dimention des barres ou modifier la taille des barres. "),Ie=d("div",{class:"text-h6"},"Alert",-1),De=_(" Veuillez entr\xE9e une quantiter. "),Le=d("span",{class:"q-ml-sm"},"La longueur existe d\xE9j\xE0, voulez-vous ajouter la quantit\xE9?",-1),Se={setup(l){const t=i(0),u=i(0),n=i(6e3),f=i(2),h=i(0),b=i(!1),L=i(!1),P=i(!1),U=i(!1),$=[{name:"longueur",required:!0,align:"left",label:"Longueur",field:s=>s.longueur},{name:"quantite",required:!0,align:"left",label:"Quantit\xE9",field:"quantite"}],W=[{name:"barre",required:!0,align:"left",label:"Barres",field:s=>s.barres},{name:"debit",required:!0,align:"left",label:"Debit",field:"debit"},{name:"chute",required:!0,align:"left",label:"Chute",field:"chute"}],c=i([]),y=i([]),z=i([]);function R(){t.value==0||t.value==""?b.value=!0:t.value>=n.value?L.value=!0:u.value==0||u.value==""?P.value=!0:c.value.find(s=>s.longueur==t.value)===void 0?c.value.push({longueur:parseInt(t.value),quantite:parseInt(u.value)}):U.value=!0,c.value.sort((s,a)=>a.longueur-s.longueur),H()}function F(){c.value.forEach(s=>{s.longueur==parseInt(t.value)&&(s.quantite=s.quantite+parseInt(u.value))}),c.value.sort((s,a)=>a.longueur-s.longueur),H()}function H(){if(c.value.length!=0){let s=[{barres:0,debit:[],debitstring:"",chute:n.value}];c.value.sort((a,r)=>r.longueur-a.longueur),c.value.forEach(a=>{for(let r=0;r<a.quantite;r++){let p=a.longueur+f.value,q=s.findIndex(C=>p<C.chute);if(q!=-1){const C=s[q].debit.find(Y=>Y.longueur==p);C===void 0?s[q].debit.push({longueur:p,quantite:1}):C.quantite++,s[q].chute=s[q].chute-p}else s.push({barres:0,debit:[{longueur:p,quantite:1}],debitstring:"",chute:n.value-p})}}),s.forEach(a=>{a.debit.forEach(r=>{a.debitstring+=r.quantite+"x"+r.longueur+" | "})}),y.value=[],h.value=0,s.forEach(a=>{h.value++;let r=y.value.find(p=>p.debit==a.debitstring);r===void 0?y.value.push({barres:1,debit:a.debitstring,chute:a.chute}):r.barres++})}}function G(){c.value=[],y=[]}function J(){const s=document.getElementById("printMe").innerHTML;let a="";for(const p of[...document.querySelectorAll('link[rel="stylesheet"], style')])a+=p.outerHTML;const r=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");return r.document.write(`<!DOCTYPE html>
<html>
  <head>
    ${a}
  </head>
  <body>
    ${s}
  </body>
</html>`),r.document.close(),r.focus(),!0}return(s,a)=>(ce(),ie(fe,{class:"flex flex-center"},{default:o(()=>[d("div",_e,[e(m,{class:"shadow-10 q-card--bordered",style:{height:"800px"}},{default:o(()=>[e(Q,null,{default:o(()=>[e(T,null,{default:o(()=>[he]),_:1})]),_:1}),d("div",ge,[d("div",be,[e(E,{outlined:"",type:"number",label:"longueur","stack-label":"",modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=r=>t.value=r)},null,8,["modelValue"]),e(E,{outlined:"",type:"number",label:"nombre","stack-label":"",modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=r=>u.value=r)},null,8,["modelValue"]),e(v,{onClick:R,color:"primary",label:"Ajouter"}),e(v,{onClick:J,color:"primary",label:"Imprimer"}),e(v,{onClick:G,color:"primary",label:"Tous suprimer"})])])]),_:1}),d("div",null,[e(m,{class:"shadow-10 q-card--bordered",style:{height:"800px",width:"300px"}},{default:o(()=>[e(Q,null,{default:o(()=>[e(T,null,{default:o(()=>[ye]),_:1})]),_:1}),d("div",qe,[e(j,{class:"my-sticky-header-table",style:{height:"715px"},flat:"",bordered:"",selection:"single",rows:c.value,columns:$,"row-key":"longueur",separator:"cell","rows-per-page-options":[0],"virtual-scroll":"",selected:z.value,"onUpdate:selected":a[2]||(a[2]=r=>z.value=r)},null,8,["rows","selected"])])]),_:1})]),d("div",we,[e(m,{id:"printMe",class:"shadow-10 q-card--bordered",style:{height:"800px","min-width":"400px"}},{default:o(()=>[e(Q,null,{default:o(()=>[e(T,null,{default:o(()=>[Ve]),_:1})]),_:1}),d("div",xe,[e(j,{class:"my-sticky-header-table",style:{height:"715px"},flat:"",bordered:"",rows:y.value,columns:W,"row-key":"barre",separator:"cell","rows-per-page-options":[0],"virtual-scroll":""},{"bottom-row":o(()=>[e(ve,null,{default:o(()=>[e(me,{colspan:"100%"},{default:o(()=>[_(" Total: "+pe(h.value),1)]),_:1})]),_:1})]),_:1},8,["rows"])])]),_:1})]),e(m,{class:"shadow-10 q-card--bordered",style:{height:"800px"}},{default:o(()=>[e(Q,null,{default:o(()=>[e(T,null,{default:o(()=>[ke]),_:1})]),_:1}),d("div",Ce,[d("div",Qe,[e(E,{outlined:"",type:"number",label:"Longueur des barres","stack-label":"",modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=r=>n.value=r)},null,8,["modelValue"]),e(E,{outlined:"",type:"number",label:"epaisseur de la coupe","stack-label":"",modelValue:f.value,"onUpdate:modelValue":a[4]||(a[4]=r=>f.value=r)},null,8,["modelValue"])])])]),_:1})]),e(A,{modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=r=>b.value=r)},{default:o(()=>[e(m,null,{default:o(()=>[e(g,null,{default:o(()=>[Te]),_:1}),e(g,{class:"q-pt-none"},{default:o(()=>[Ee]),_:1}),e(B,{align:"right"},{default:o(()=>[w(e(v,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:L.value,"onUpdate:modelValue":a[6]||(a[6]=r=>L.value=r)},{default:o(()=>[e(m,null,{default:o(()=>[e(g,null,{default:o(()=>[Ae]),_:1}),e(g,{class:"q-pt-none"},{default:o(()=>[Be]),_:1}),e(B,{align:"right"},{default:o(()=>[w(e(v,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:P.value,"onUpdate:modelValue":a[7]||(a[7]=r=>P.value=r)},{default:o(()=>[e(m,null,{default:o(()=>[e(g,null,{default:o(()=>[Ie]),_:1}),e(g,{class:"q-pt-none"},{default:o(()=>[De]),_:1}),e(B,{align:"right"},{default:o(()=>[w(e(v,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:U.value,"onUpdate:modelValue":a[8]||(a[8]=r=>U.value=r),persistent:""},{default:o(()=>[e(m,null,{default:o(()=>[e(g,{class:"row items-center"},{default:o(()=>[Le]),_:1}),e(B,{align:"right"},{default:o(()=>[w(e(v,{flat:"",label:"Oui",onClick:F,color:"primary"},null,512),[[V]]),w(e(v,{flat:"",label:"Non",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Se as default};
