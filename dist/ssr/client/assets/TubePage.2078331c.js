var ee=Object.defineProperty,le=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var K=(l,t,o)=>t in l?ee(l,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[t]=o,M=(l,t)=>{for(var o in t||(t={}))ae.call(t,o)&&K(l,o,t[o]);if(O)for(var o of O(t))oe.call(t,o)&&K(l,o,t[o]);return l},N=(l,t)=>le(l,te(t));import{p as Q,q as T}from"./QItem.2d576740.js";import{g as ue,d as re,Q as E,b as v,c as S,e as A}from"./QTable.66535980.js";import{j as se,k as ne,a as m}from"./QBtn.644800ba.js";import{c as I,d as x,a as de}from"./render.3c5a9b3c.js";import{e as L,h as k,g as ie,R as ce,r as i,E as pe,F as u,D as fe,O as d,G as e,I as _,J as ve,x as w}from"./index.2027c8e1.js";import{Q as me}from"./QPage.84759064.js";var _e=I({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(l,{slots:t}){const o=ie(),n=L(()=>"q-td"+(l.autoWidth===!0?" q-table--col-auto-width":"")+(l.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(l.props===void 0)return k("td",{class:n.value},x(t.default));const p=o.vnode.key,h=(l.props.colsMap!==void 0?l.props.colsMap[p]:null)||l.props.col;if(h===void 0)return;const{row:b}=l.props;return k("td",{class:n.value+h.__tdClass(b),style:h.__tdStyle(b)},x(t.default))}}}),he=I({name:"QTr",props:{props:Object,noHover:Boolean},setup(l,{slots:t}){const o=L(()=>"q-tr"+(l.props===void 0||l.props.header===!0?"":" "+l.props.__trClass)+(l.noHover===!0?" q-tr--no-hover":""));return()=>k("tr",{class:o.value},x(t.default))}}),g=I({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(l,{slots:t}){const o=L(()=>`q-card__section q-card__section--${l.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>k(l.tag,{class:o.value},x(t.default))}}),B=I({name:"QCardActions",props:N(M({},se),{vertical:Boolean}),setup(l,{slots:t}){const o=ne(l),n=L(()=>`q-card__actions ${o.value} q-card__actions--${l.vertical===!0?"vert column":"horiz row"}`);return()=>k("div",{class:n.value},x(t.default))}});function j(l){if(l===!1)return 0;if(l===!0||l===void 0)return 1;const t=parseInt(l,10);return isNaN(t)?0:t}var V=de({name:"close-popup",beforeMount(l,{value:t}){const o={depth:j(t),handler(n){o.depth!==0&&setTimeout(()=>{const p=ue(l);p!==void 0&&re(p,n,o.depth)})},handlerKey(n){ce(n,13)===!0&&o.handler(n)}};l.__qclosepopup=o,l.addEventListener("click",o.handler),l.addEventListener("keyup",o.handlerKey)},updated(l,{value:t,oldValue:o}){t!==o&&(l.__qclosepopup.depth=j(t))},beforeUnmount(l){const t=l.__qclosepopup;l.removeEventListener("click",t.handler),l.removeEventListener("keyup",t.handlerKey),delete l.__qclosepopup}});const ge={class:"row items-start q-gutter-md"},be=_(" Dimension "),ye={style:{margin:"15px"}},qe={class:"col column q-gutter-md"},we=_(" Liste "),Ve={style:{margin:"15px"}},xe={class:"col"},ke=_(" Resultat "),Ce={style:{margin:"15px"}},Qe=_(" Param\xE8tres "),Te={style:{margin:"15px"}},Ee={class:"col column q-gutter-md"},Ae=d("div",{class:"text-h6"},"Alert",-1),Be=_(" Veuillez entr\xE9e une longueur. "),Ie=d("div",{class:"text-h6"},"Alert",-1),Le=_(" Veuillez entr\xE9e une longueur inferieur a la dimention des barres ou modifier la taille des barres. "),De=d("div",{class:"text-h6"},"Alert",-1),Pe=_(" Veuillez entr\xE9e une quantiter. "),Ue=d("span",{class:"q-ml-sm"},"La longueur existe d\xE9j\xE0, voulez-vous ajouter la quantit\xE9?",-1),je={setup(l){const t=i(0),o=i(0),n=i(6e3),p=i(2),h=i(0),b=i(!1),D=i(!1),P=i(!1),U=i(!1),$=[{name:"longueur",required:!0,align:"left",label:"Longueur",field:s=>s.longueur},{name:"quantite",required:!0,align:"left",label:"Quantit\xE9",field:"quantite"}],F=[{name:"barre",required:!0,align:"left",label:"Barres",field:s=>s.barres},{name:"debit",required:!0,align:"left",label:"Debit",field:"debit"},{name:"chute",required:!0,align:"left",label:"Chute",field:"chute"}],c=i([]),y=i([]),z=i([]);function W(){t.value==0||t.value==""?b.value=!0:t.value>=n.value?D.value=!0:o.value==0||o.value==""?P.value=!0:c.value.find(s=>s.longueur==t.value)===void 0?c.value.push({longueur:parseInt(t.value),quantite:parseInt(o.value)}):U.value=!0,c.value.sort((s,a)=>a.longueur-s.longueur),H()}function R(){c.value.forEach(s=>{s.longueur==parseInt(t.value)&&(s.quantite=s.quantite+parseInt(o.value))}),c.value.sort((s,a)=>a.longueur-s.longueur),H()}function H(){if(c.value.length!=0){let s=[{barres:0,debit:[],debitstring:"",chute:n.value}];c.value.sort((a,r)=>r.longueur-a.longueur),c.value.forEach(a=>{for(let r=0;r<a.quantite;r++){let f=a.longueur+p.value,q=s.findIndex(C=>f<C.chute);if(q!=-1){const C=s[q].debit.find(Z=>Z.longueur==f);C===void 0?s[q].debit.push({longueur:a.longueur,quantite:1}):C.quantite++,s[q].chute=s[q].chute-f}else s.push({barres:0,debit:[{longueur:a.longueur,quantite:1}],debitstring:"",chute:n.value-f})}}),s.forEach(a=>{a.debit.forEach(r=>{a.debitstring+=r.quantite+"x"+r.longueur+" | "})}),y.value=[],h.value=0,s.forEach(a=>{h.value++;let r=y.value.find(f=>f.debit==a.debitstring);r===void 0?y.value.push({barres:1,debit:a.debitstring,chute:a.chute}):r.barres++})}}function G(){c.value=[],y=[]}function J(){const s=document.getElementById("printMe").innerHTML;let a="";for(const f of[...document.querySelectorAll('link[rel="stylesheet"], style')])a+=f.outerHTML;const r=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");return r.document.write(`<!DOCTYPE html>
<html>
  <head>
    ${a}
  </head>
  <body>
    ${s}
  </body>
</html>`),r.document.close(),r.focus(),!0}function Y(){t.value=""}function X(){o.value=""}return(s,a)=>(fe(),pe(me,{class:"flex flex-center"},{default:u(()=>[d("div",ge,[e(v,{class:"shadow-10 q-card--bordered",style:{height:"800px"}},{default:u(()=>[e(Q,null,{default:u(()=>[e(T,null,{default:u(()=>[be]),_:1})]),_:1}),d("div",ye,[d("div",qe,[e(E,{outlined:"",type:"number",label:"longueur","stack-label":"",modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=r=>t.value=r),onFocus:Y},null,8,["modelValue"]),e(E,{outlined:"",type:"number",label:"nombre","stack-label":"",modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=r=>o.value=r),onFocus:X},null,8,["modelValue"]),e(m,{onClick:W,color:"primary",label:"Ajouter"}),e(m,{onClick:J,color:"primary",label:"Imprimer"}),e(m,{onClick:G,color:"primary",label:"Tous suprimer"})])])]),_:1}),d("div",null,[e(v,{class:"shadow-10 q-card--bordered",style:{height:"800px",width:"300px"}},{default:u(()=>[e(Q,null,{default:u(()=>[e(T,null,{default:u(()=>[we]),_:1})]),_:1}),d("div",Ve,[e(S,{class:"my-sticky-header-table",style:{height:"715px"},flat:"",bordered:"",selection:"single",rows:c.value,columns:$,"row-key":"longueur",separator:"cell","rows-per-page-options":[0],"virtual-scroll":"",selected:z.value,"onUpdate:selected":a[2]||(a[2]=r=>z.value=r)},null,8,["rows","selected"])])]),_:1})]),d("div",xe,[e(v,{id:"printMe",class:"shadow-10 q-card--bordered",style:{height:"800px","min-width":"400px"}},{default:u(()=>[e(Q,null,{default:u(()=>[e(T,null,{default:u(()=>[ke]),_:1})]),_:1}),d("div",Ce,[e(S,{class:"my-sticky-header-table",style:{height:"715px"},flat:"",bordered:"",rows:y.value,columns:F,"row-key":"barre",separator:"cell","rows-per-page-options":[0],"virtual-scroll":""},{"bottom-row":u(()=>[e(he,null,{default:u(()=>[e(_e,{colspan:"100%"},{default:u(()=>[_(" Total: "+ve(h.value),1)]),_:1})]),_:1})]),_:1},8,["rows"])])]),_:1})]),e(v,{class:"shadow-10 q-card--bordered",style:{height:"800px"}},{default:u(()=>[e(Q,null,{default:u(()=>[e(T,null,{default:u(()=>[Qe]),_:1})]),_:1}),d("div",Te,[d("div",Ee,[e(E,{outlined:"",type:"number",label:"Longueur des barres","stack-label":"",modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=r=>n.value=r)},null,8,["modelValue"]),e(E,{outlined:"",type:"number",label:"epaisseur de la coupe","stack-label":"",modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=r=>p.value=r)},null,8,["modelValue"])])])]),_:1})]),e(A,{modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=r=>b.value=r)},{default:u(()=>[e(v,null,{default:u(()=>[e(g,null,{default:u(()=>[Ae]),_:1}),e(g,{class:"q-pt-none"},{default:u(()=>[Be]),_:1}),e(B,{align:"right"},{default:u(()=>[w(e(m,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:D.value,"onUpdate:modelValue":a[6]||(a[6]=r=>D.value=r)},{default:u(()=>[e(v,null,{default:u(()=>[e(g,null,{default:u(()=>[Ie]),_:1}),e(g,{class:"q-pt-none"},{default:u(()=>[Le]),_:1}),e(B,{align:"right"},{default:u(()=>[w(e(m,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:P.value,"onUpdate:modelValue":a[7]||(a[7]=r=>P.value=r)},{default:u(()=>[e(v,null,{default:u(()=>[e(g,null,{default:u(()=>[De]),_:1}),e(g,{class:"q-pt-none"},{default:u(()=>[Pe]),_:1}),e(B,{align:"right"},{default:u(()=>[w(e(m,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:U.value,"onUpdate:modelValue":a[8]||(a[8]=r=>U.value=r),persistent:""},{default:u(()=>[e(v,null,{default:u(()=>[e(g,{class:"row items-center"},{default:u(()=>[Ue]),_:1}),e(B,{align:"right"},{default:u(()=>[w(e(m,{flat:"",label:"Oui",onClick:R,color:"primary"},null,512),[[V]]),w(e(m,{flat:"",label:"Non",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{je as default};
