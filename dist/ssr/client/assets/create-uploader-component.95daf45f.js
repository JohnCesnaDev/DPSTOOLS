var he=Object.defineProperty,be=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var ae=(e,s,l)=>s in e?he(e,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[s]=l,F=(e,s)=>{for(var l in s||(s={}))Fe.call(s,l)&&ae(e,l,s[l]);if(te)for(var l of te(s))ke.call(s,l)&&ae(e,l,s[l]);return e},O=(e,s)=>be(e,ye(s));import{d as Se,e as qe,f as le,Q as xe,a as re}from"./QBtn.c6638eff.js";import{c as ue,f as ze}from"./render.7c018b54.js";import{b as Ce,h as se}from"./format.2a3572e1.js";import{e as c,h as u,g as M,r as q,s as ne,v as ie,y as Ue,X as we,w as Be,a as Le,Q as $e,Y as je}from"./index.601e6d44.js";import{u as Ne,a as De}from"./use-dark.40211699.js";const Oe=O(F({},Se),{min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean}),A=50,de=2*A,ce=de*Math.PI,Re=Math.round(ce*1e3)/1e3;var Pe=ue({name:"QCircularProgress",props:O(F({},Oe),{value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean}),setup(e,{slots:s}){const{proxy:{$q:l}}=M(),m=qe(e),d=c(()=>{const _=(l.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(l.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-_}deg)`:`rotate3d(0, 0, 1, ${_-90}deg)`}}),b=c(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),v=c(()=>de/(1-e.thickness/2)),L=c(()=>`${v.value/2} ${v.value/2} ${v.value} ${v.value}`),U=c(()=>Ce(e.value,e.min,e.max)),a=c(()=>ce*(1-(U.value-e.min)/(e.max-e.min))),f=c(()=>e.thickness/2*v.value);function x({thickness:_,offset:z,color:w,cls:B}){return u("circle",{class:"q-circular-progress__"+B+(w!==void 0?` text-${w}`:""),style:b.value,fill:"transparent",stroke:"currentColor","stroke-width":_,"stroke-dasharray":Re,"stroke-dashoffset":z,cx:v.value,cy:v.value,r:A})}return()=>{const _=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&_.push(u("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:A-f.value/2,cx:v.value,cy:v.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&_.push(x({cls:"track",thickness:f.value,offset:0,color:e.trackColor})),_.push(x({cls:"circle",thickness:f.value,offset:a.value,color:e.color}));const z=[u("svg",{class:"q-circular-progress__svg",style:d.value,viewBox:L.value,"aria-hidden":"true"},_)];return e.showValue===!0&&z.push(u("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},s.default!==void 0?s.default():[u("div",U.value)])),u("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:m.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:U.value},ze(s.internal,z))}}});function $(e,s,l,m){const d=[];return e.forEach(b=>{m(b)===!0?d.push(b):s.push({failedPropValidation:l,file:b})}),d}function R(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ie(e)}const Te={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ie=["rejected"];function Ee({editable:e,dnd:s,getFileInput:l,addFilesToQueue:m}){const{props:d,emit:b,proxy:v}=M(),L=q(null),U=c(()=>d.accept!==void 0?d.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),a=c(()=>parseInt(d.maxFiles,10)),f=c(()=>parseInt(d.maxTotalSize,10));function x(r){if(e.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&ne(r);else{const k=l();k&&k!==r.target&&k.click(r)}}function _(r){e.value&&r&&m(null,r)}function z(r,k,j,D){let n=Array.from(k||r.target.files);const y=[],S=()=>{y.length>0&&b("rejected",y)};if(d.accept!==void 0&&U.value.indexOf("*/")===-1&&(n=$(n,y,"accept",i=>U.value.some(h=>i.type.toUpperCase().startsWith(h)||i.name.toUpperCase().endsWith(h))),n.length===0))return S();if(d.maxFileSize!==void 0){const i=parseInt(d.maxFileSize,10);if(n=$(n,y,"max-file-size",h=>h.size<=i),n.length===0)return S()}d.multiple!==!0&&n.length>0&&(n=[n[0]]),n.forEach(i=>{i.__key=i.webkitRelativePath+i.lastModified+i.name+i.size});const I=j.map(i=>i.__key);if(n=$(n,y,"duplicate",i=>I.includes(i.__key)===!1),n.length===0)return S();if(d.maxTotalSize!==void 0){let i=D===!0?j.reduce((h,E)=>h+E.size,0):0;if(n=$(n,y,"max-total-size",h=>(i+=h.size,i<=f.value)),n.length===0)return S()}if(typeof d.filter=="function"){const i=d.filter(n);n=$(n,y,"filter",h=>i.includes(h))}if(d.maxFiles!==void 0){let i=D===!0?j.length:0;if(n=$(n,y,"max-files",()=>(i++,i<=a.value)),n.length===0)return S()}if(S(),n.length>0)return n}function w(r){R(r),s.value!==!0&&(s.value=!0)}function B(r){ie(r),r.relatedTarget!==L.value&&(s.value=!1)}function P(r){R(r);const k=r.dataTransfer.files;k.length>0&&m(null,k),s.value=!1}function T(r){if(s.value===!0)return u("div",{ref:L,class:`q-${r}__dnd absolute-full`,onDragenter:R,onDragover:R,onDragleave:B,onDrop:P})}return Object.assign(v,{pickFiles:x,addFiles:_}),{pickFiles:x,addFiles:_,onDragover:w,processFiles:z,getDndNode:T,maxFilesNumber:a,maxTotalSizeNumber:f}}function oe(e){return(e*100).toFixed(2)+"%"}const Ae=O(F(F({},Ne),Te),{label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean}),ve=[...Ie,"start","finish","added","removed"];function Me(e){const s=M(),{props:l,slots:m,emit:d,proxy:b}=s,{$q:v}=b,L=De(l,v);function U(t,o,p){if(t.__status=o,o==="idle"){t.__uploaded=0,t.__progress=0,t.__sizeLabel=se(t.size),t.__progressLabel="0.00%";return}if(o==="failed"){b.$forceUpdate();return}t.__uploaded=o==="uploaded"?t.size:p,t.__progress=o==="uploaded"?1:Math.min(.9999,t.__uploaded/t.size),t.__progressLabel=oe(t.__progress),b.$forceUpdate()}const a={files:q([]),queuedFiles:q([]),uploadedFiles:q([]),uploadedSize:q(0),updateFileStatus:U,isAlive(){return s.isDeactivated!==!0&&s.isUnmounted!==!0}};Object.assign(a,e({props:l,slots:m,emit:d,helpers:a}));const f=q(0),x=c(()=>l.disable!==!0&&l.readonly!==!0);a.isBusy===void 0&&(a.isBusy=q(!1));const _=q(!1),z=q(null),w=q(null);Ue(we,J);const{pickFiles:B,addFiles:P,onDragover:T,onDragleave:r,processFiles:k,getDndNode:j,maxFilesNumber:D,maxTotalSizeNumber:n}=Ee({editable:x,dnd:_,getFileInput:H,addFilesToQueue:K}),y=c(()=>x.value===!0&&a.isUploading.value!==!0&&(l.multiple===!0||a.queuedFiles.value.length===0)&&(l.maxFiles===void 0||a.files.value.length<D.value)&&(l.maxTotalSize===void 0||f.value<n.value)),S=c(()=>x.value===!0&&a.isBusy.value!==!0&&a.isUploading.value!==!0&&a.queuedFiles.value.length>0),I=c(()=>f.value===0?0:a.uploadedSize.value/f.value),i=c(()=>oe(I.value)),h=c(()=>se(f.value)),E=c(()=>"q-uploader column no-wrap"+(L.value===!0?" q-uploader--dark q-dark":"")+(l.bordered===!0?" q-uploader--bordered":"")+(l.square===!0?" q-uploader--square no-border-radius":"")+(l.flat===!0?" q-uploader--flat no-shadow":"")+(l.disable===!0?" disabled q-uploader--disable":"")),fe=c(()=>"q-uploader__header"+(l.color!==void 0?` bg-${l.color}`:"")+(l.textColor!==void 0?` text-${l.textColor}`:""));Be(a.isUploading,(t,o)=>{o===!1&&t===!0?d("start"):o===!0&&t===!1&&d("finish")});function pe(){l.disable===!1&&(a.abort(),a.uploadedSize.value=0,f.value=0,G(),a.files.value=[],a.queuedFiles.value=[],a.uploadedFiles.value=[])}function Q(){l.disable===!1&&X(["uploaded"],()=>{a.uploadedFiles.value=[]})}function W(){X(["idle","failed"],({size:t})=>{f.value-=t,a.queuedFiles.value=[]})}function X(t,o){if(l.disable===!0)return;const p={files:[],size:0},C=a.files.value.filter(g=>t.indexOf(g.__status)===-1?!0:(p.size+=g.size,p.files.push(g),g.__img!==void 0&&window.URL.revokeObjectURL(g.__img.src),!1));p.files.length>0&&(a.files.value=C,o(p),d("removed",p.files))}function Y(t){l.disable||(t.__status==="uploaded"?a.uploadedFiles.value=a.uploadedFiles.value.filter(o=>o.__key!==t.__key):t.__status==="uploading"?t.__abort():f.value-=t.size,a.files.value=a.files.value.filter(o=>o.__key!==t.__key?!0:(o.__img!==void 0&&window.URL.revokeObjectURL(o.__img.src),!1)),a.queuedFiles.value=a.queuedFiles.value.filter(o=>o.__key!==t.__key),d("removed",[t]))}function G(){a.files.value.forEach(t=>{t.__img!==void 0&&window.URL.revokeObjectURL(t.__img.src)})}function H(){return w.value||z.value.getElementsByClassName("q-uploader__input")[0]}function K(t,o){const p=k(t,o,a.files.value,!0);if(p===void 0)return;const C=H();C!=null&&(C.value=""),p.forEach(g=>{if(a.updateFileStatus(g,"idle"),f.value+=g.size,l.noThumbnails!==!0&&g.type.toUpperCase().startsWith("IMAGE")){const ee=new Image;ee.src=window.URL.createObjectURL(g),g.__img=ee}}),a.files.value=a.files.value.concat(p),a.queuedFiles.value=a.queuedFiles.value.concat(p),d("added",p),l.autoUpload===!0&&a.upload()}function me(){S.value===!0&&a.upload()}function N(t,o,p){if(t===!0){const C={type:"a",key:o,icon:v.iconSet.uploader[o],flat:!0,dense:!0};let g;return o==="add"?(C.onClick=B,g=J):C.onClick=p,u(re,C,g)}}function J(){return u("input",{ref:w,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:l.accept,multiple:l.multiple===!0?"multiple":void 0,capture:l.capture,onMousedown:ne,onClick:B,onChange:K})}function _e(){return m.header!==void 0?m.header(Z.value):[u("div",{class:"q-uploader__header-content flex flex-center no-wrap q-gutter-xs"},[N(a.queuedFiles.value.length>0,"removeQueue",W),N(a.uploadedFiles.value.length>0,"removeUploaded",Q),a.isUploading.value===!0?u(le,{class:"q-uploader__spinner"}):null,u("div",{class:"col column justify-center"},[l.label!==void 0?u("div",{class:"q-uploader__title"},[l.label]):null,u("div",{class:"q-uploader__subtitle"},[h.value+" / "+i.value])]),N(y.value,"add"),N(l.hideUploadBtn===!1&&S.value===!0,"upload",a.upload),N(a.isUploading.value,"clear",a.abort)])]}function ge(){return m.list!==void 0?m.list(Z.value):a.files.value.map(t=>u("div",{key:t.__key,class:"q-uploader__file relative-position"+(l.noThumbnails!==!0&&t.__img!==void 0?" q-uploader__file--img":"")+(t.__status==="failed"?" q-uploader__file--failed":t.__status==="uploaded"?" q-uploader__file--uploaded":""),style:l.noThumbnails!==!0&&t.__img!==void 0?{backgroundImage:'url("'+t.__img.src+'")'}:null},[u("div",{class:"q-uploader__file-header row flex-center no-wrap"},[t.__status==="failed"?u(xe,{class:"q-uploader__file-status",name:v.iconSet.type.negative,color:"negative"}):null,u("div",{class:"q-uploader__file-header-content col"},[u("div",{class:"q-uploader__title"},[t.name]),u("div",{class:"q-uploader__subtitle row items-center no-wrap"},[t.__sizeLabel+" / "+t.__progressLabel])]),t.__status==="uploading"?u(Pe,{value:t.__progress,min:0,max:1,indeterminate:t.__progress===0}):u(re,{round:!0,dense:!0,flat:!0,icon:v.iconSet.uploader[t.__status==="uploaded"?"done":"clear"],onClick:()=>{Y(t)}})])]))}Le(()=>{a.isUploading.value===!0&&a.abort(),a.files.value.length>0&&G()});const V={pickFiles:B,addFiles:P,reset:pe,removeUploadedFiles:Q,removeQueuedFiles:W,removeFile:Y,upload:me,abort:a.abort},Z=c(()=>{const t={canAddFiles:y.value,canUpload:S.value,uploadSizeLabel:h.value,uploadProgressLabel:i.value};for(const o in a)t[o]=$e(a[o])===!0?a[o].value:a[o];return F(F({},t),V)});return Object.assign(b,V),()=>{const t=[u("div",{class:fe.value},_e()),u("div",{class:"q-uploader__list scroll"},ge()),j("uploader")];a.isBusy.value===!0&&t.push(u("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[u(le)]));const o={ref:z,class:E.value};return y.value===!0&&Object.assign(o,{onDragover:T,onDragleave:r}),u("div",o,t)}}const Qe=()=>!0;function We(e){const s={};return e.forEach(l=>{s[l]=Qe}),s}const Xe=We(ve);var Ze=({name:e,props:s,emits:l,injectPlugin:m})=>ue({name:e,props:F(F({},Ae),s),emits:je(l)===!0?F(F({},Xe),l):[...ve,...l],setup(){return Me(m)}});export{Ze as c};
