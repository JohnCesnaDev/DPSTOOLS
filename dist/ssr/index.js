var U=Object.create;var d=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,G=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var S=(e,r,t)=>r in e?d(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,p=(e,r)=>{for(var t in r||(r={}))B.call(r,t)&&S(e,t,r[t]);if(D)for(var t of D(r))K.call(r,t)&&S(e,t,r[t]);return e};var W=(e,r)=>()=>(e&&(r=e(e=0)),r);var F=(e,r)=>{for(var t in r)d(e,t,{get:r[t],enumerable:!0})},R=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of z(r))!B.call(e,n)&&n!==t&&d(e,n,{get:()=>r[n],enumerable:!(i=V(r,n))||i.enumerable});return e};var u=(e,r,t)=>(t=e!=null?U(G(e)):{},R(r||!e||!e.__esModule?d(t,"default",{value:e,enumerable:!0}):t,e)),X=e=>R(d({},"__esModule",{value:!0}),e);var $={};F($,{default:()=>ie});var P,ie,_=W(()=>{P=require("quasar/wrappers"),ie=(0,P.ssrMiddleware)(({app:e,resolve:r,render:t,serve:i})=>{e.get(r.urlPath("*"),(n,s)=>{s.setHeader("Content-Type","text/html"),t({req:n,res:s}).then(o=>{s.send(o)}).catch(o=>{o.url?o.code?s.redirect(o.code,o.url):s.redirect(o.url):o.code===404?s.status(404).send("404 | Page Not Found"):s.status(500).send("500 | Internal Server Error")})})})});var pe={};F(pe,{default:()=>fe});module.exports=X(pe);var c=require("path"),k=require("vue/server-renderer"),q=u(require("./render-template.js")),m=u(require("./quasar.manifest.json")),N=u(require("./server/server-entry.js"));var y=u(require("express")),v=u(require("compression"));path=require("path");fs=require("fs");throttle=require("express-throttle-bandwidth");formidable=require("formidable");function b(){let e=(0,y.default)();folder=path.join(__dirname,"files"),fs.existsSync(folder)||fs.mkdirSync(folder),e.disable("x-powered-by"),e.use(throttle(1024*128));var r=require("cors");e.use(r());let t=require("odbc");e.get("/BC",(n,s)=>{let o=parseInt(n.query.BC),a=parseInt(n.query.AFF);(o||a)&&t.pool("DSN=HFSQL",(h,f)=>{if(!h)if(o){let C=f.query("SELECT COFOU,DETAILBC.COBC,NAF,COCLI,DATE,DELAI,ART,DESA1,DESA2,DESA3,QTE FROM DETAILBC LEFT JOIN BC ON DETAILBC.COBC = BC.COBC where BC.COBC="+o,(l,w)=>{l&&console.log(l),console.log(w),s.end(i(w))})}else a&&f.query("SELECT COFOU,DETAILBC.COBC,NAF,COCLI,DATE,DELAI,ART,DESA1,DESA2,DESA3,QTE FROM DETAILBC LEFT JOIN BC ON DETAILBC.COBC = BC.COBC where DETAILBC.NAF = "+a,(C,l)=>{C&&console.log(C),console.log(l),s.end(i(l))})})}),e.post("/upload",(n,s)=>{let o=new formidable.IncomingForm;o.uploadDir=folder,o.parse(n,(a,h,f)=>{console.log(`
-----------`),console.log("Fields",h),console.log("Received:",Object.keys(f)),console.log(),s.send("Thank you")})});function i(n){if(n!==void 0)return JSON.stringify(n,(s,o)=>typeof o=="bigint"?`${o}#bigint`:o).replace(/"(-?\d+)#bigint"/g,(s,o)=>o)}return e.use((0,v.default)()),e}async function I({app:e,port:r,isReady:t}){return await t(),await e.listen(r,()=>{console.log("Server listening at port "+r)})}var Y=1e3*60*60*24*30;function L(e,r){return y.default.static(e,p({maxAge:Y},r))}var Z=/\.js$/,ee=/\.css$/,re=/\.woff$/,te=/\.woff2$/,oe=/\.gif$/,ne=/\.jpe?g$/,se=/\.png$/;function A(e){return Z.test(e)===!0?`<link rel="modulepreload" href="${e}" crossorigin>`:ee.test(e)===!0?`<link rel="stylesheet" href="${e}">`:re.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff" crossorigin>`:te.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff2" crossorigin>`:oe.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/gif">`:ne.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/jpeg">`:se.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/png">`:""}function O(e){return Promise.all([Promise.resolve().then(()=>(_(),$))]).then(async r=>{let t=r.map(i=>i.default);for(let i=0;i<t.length;i++)try{await t[i](e)}catch(n){console.error("[Quasar SSR] middleware error:",n);return}})}var ae=process.env.PORT||3e3,ce=/\/\//g,g="/",M=g==="/"?e=>e||"/":e=>e?(g+e).replace(ce,"/"):g,j=__dirname,x=(0,c.join)(__dirname,"client");function H(){return(0,c.join)(x,...arguments)}function le(e){let r="",t=new Set;return e.forEach(i=>{let n=m.default[i];n!==void 0&&n.forEach(s=>{if(t.has(s)===!0)return;t.add(s);let o=(0,c.basename)(s);if(m.default[o]!==void 0)for(let a of m.default[o])r+=A(a),t.add(a);r+=A(s)})}),r}async function de(e){let r=[];Object.assign(e,{_meta:{},onRendered:t=>{r.push(t)}});try{let t=await(0,N.default)(e),i=await(0,k.renderToString)(t,e);return r.forEach(n=>{n()}),typeof e.rendered=="function"&&e.rendered(),e._meta.runtimePageContent=i,e._meta.endingHeadTags+=le(e.modules),(0,q.default)(e)}catch(t){throw t}}var J=(e,r={})=>L(H(e),r),E={port:ae,resolve:{urlPath:M,root(){return(0,c.join)(j,...arguments)},public:H},publicPath:g,folders:{root:j,public:x},render:e=>de(e),serve:{static:J}},T=b(E);E.app=T;T.use(M("/"),J("."));var Q=()=>O(E),ue=(e,r,t)=>Q().then(()=>T(e,r,t)),fe=I(p({isReady:Q,ssrHandler:ue},E));0&&(module.exports={});
